<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Supershield Glazing</title>
  <meta name="description" content="A-rated double glazing in Southall — windows, doors, conservatories."/>
  <style>
    :root{
      --ink:#0f172a; --ink-2:#1f2937; --muted:#64748b; --line:#e5e7eb; --bg:#f8fafc;
      --brand:#0284c7; --brand2:#0ea5e9; --card:#fff; --ok:#059669; --err:#dc2626;
      --shadow:0 10px 25px rgba(2,8,23,.06)
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--ink);background:var(--bg);}

    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .hero{
      border-radius:20px; padding:24px; color:#fff; box-shadow:var(--shadow);
      background: linear-gradient(120deg, var(--brand), var(--brand2));
      display:grid; grid-template-columns:1.2fr 1fr; gap:16px; align-items:center;
    }
    .hero h1{margin:8px 0 6px; font-size:28px}
    .hero p{margin:6px 0; color:#e6f6ff}

    .header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px
    }
    .logo{display:flex; align-items:center; gap:10px}
    .logo svg{height:46px; width:auto}
    .brand{font-weight:800; font-size:20px; color:var(--ink)}
    .card{
      background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px; box-shadow:var(--shadow)
    }

    .grid-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px}
    .pill{border:1px solid var(--line); border-radius:12px; padding:10px 12px; background:#fff}

    .form{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .form input, .form textarea{
      width:100%; padding:12px; border:1px solid var(--line); border-radius:12px; background:#fff; color:var(--ink)
    }
    .btn{
      border:1px solid transparent; border-radius:12px; padding:12px 16px; cursor:pointer;
      background:linear-gradient(90deg,var(--brand),var(--brand2)); color:#fff; font-weight:600;
      box-shadow:0 6px 18px rgba(2,132,199,.25);
    }
    .btn:disabled{opacity:.7; cursor:default}

    .status{margin-top:8px; color:var(--muted)}
    .status.ok{color:var(--ok)}
    .status.err{color:var(--err)}

    footer{margin:24px 0 8px; color:var(--muted); font-size:13px}
    .foot{
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap:wrap
    }
    .foot .addr{white-space:pre-line}
    .foot .mini{color:#94a3b8; font-size:12px}

    @media (max-width:980px){
      .hero{grid-template-columns:1fr}
      .form{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Top -->
    <div class="header">
      <div class="logo" aria-label="Supershield Glazing">
        <!-- Inline logo (no external files) -->
        <svg viewBox="0 0 420 80" role="img" aria-label="Supershield logo">
          <defs>
            <linearGradient id="g" x1="0" x2="1">
              <stop offset="0" stop-color="#0ea5e9"/><stop offset="1" stop-color="#0369a1"/>
            </linearGradient>
          </defs>
          <rect x="10" y="10" width="60" height="60" rx="12" fill="url(#g)"/>
          <path d="M30 50 l10 -20 l10 20" stroke="white" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="brand">Supershield Glazing</div>
      </div>
      <!-- Hidden admin link; Basic Auth handled by /api/admin -->
      <a href="/admin.html" style="display:none">Admin</a>
    </div>

    <!-- Hero -->
    <section class="hero">
      <div>
        <h1>A-Rated Double Glazing for Warmer, Quieter Homes</h1>
        <p>Windows • Doors • Conservatories — FENSA-compliant workmanship and friendly local service.</p>
        <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap">
          <a class="btn" href="#enquiry">Request a callback</a>
          <a class="btn" href="#services" style="background:#fff;color:var(--ink);border-color:var(--line)">Our services</a>
        </div>
      </div>
      <div class="card" style="background:rgba(255,255,255,.9)">
        <div style="font-weight:700; margin-bottom:6px">Why choose us</div>
        <ul style="margin:0 0 0 18px; padding:0; color:var(--ink-2)">
          <li>Energy-efficient glazing to lower bills</li>
          <li>Clean, tidy installs with waste removal</li>
          <li>Local, responsive aftercare</li>
        </ul>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="card" style="margin-top:16px">
      <h3 style="margin:6px 0">Popular Services</h3>
      <div class="grid-3" id="serviceGrid"></div>
    </section>

    <!-- Enquiry -->
    <section id="enquiry" class="card" style="margin-top:12px">
      <h3 style="margin:6px 0">Request a Callback</h3>
      <form id="enqForm" class="form" autocomplete="on">
        <input name="firstName" placeholder="First name" required aria-label="First name">
        <input name="lastName" placeholder="Last name" required aria-label="Last name">
        <input name="email" type="email" placeholder="Email" required aria-label="Email">
        <input name="phone" placeholder="Mobile (optional)" aria-label="Mobile">
        <textarea name="message" rows="5" placeholder="What do you need?" style="grid-column:1/-1" aria-label="Message"></textarea>
        <button id="sendBtn" type="submit" class="btn" style="grid-column:1/-1">Send</button>
      </form>
      <div id="enqStatus" class="status">We’ll call you back within 1 business day.</div>
    </section>

    <!-- Footer -->
    <footer class="card" style="margin-top:12px">
      <div class="foot">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 420 80">
            <use href="#g"></use>
            <rect x="10" y="10" width="60" height="60" rx="12" fill="url(#g)"/>
            <path d="M30 50 l10 -20 l10 20" stroke="white" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <div class="brand">Supershield Glazing</div>
        </div>
        <div class="addr">
          <strong>Trading address</strong><br/>
          4 Fairfield Road<br/>Southall<br/>UB1 2DQ
        </div>
        <div class="mini">© <span id="year"></span> Supershield Glazing. All rights reserved.</div>
      </div>
    </footer>
  </div>

  <script>
    // Tiny features list
    const SERVICES=[ "uPVC Double Glazed Windows", "Composite Doors", "Patio & French Doors" ];
    document.getElementById('serviceGrid').innerHTML = SERVICES.map(n => `<div class="pill">${n}</div>`).join('');

    // Resilient POST helper so non-JSON responses don't blank the page
    async function postJSON(url, data){
      const resp = await fetch(url, {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify(data)
      });
      const ct = resp.headers.get('content-type') || '';
      if(!ct.includes('application/json')){
        const text = await resp.text();
        throw new Error(`Non-JSON (${resp.status}): ${text.slice(0,120)}`);
      }
      const json = await resp.json();
      if(!resp.ok) throw new Error(json.error || `HTTP ${resp.status}`);
      return json;
    }

    // Enquiry handler
    const form = document.getElementById('enqForm');
    const statusEl = document.getElementById('enqStatus');
    const sendBtn = document.getElementById('sendBtn');
    document.getElementById('year').textContent = new Date().getFullYear();

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      sendBtn.disabled = true;
      statusEl.className = 'status';
      statusEl.textContent = 'Sending…';
      try{
        const data = Object.fromEntries(new FormData(form).entries());
        const res = await postJSON('/api/send-enquiry', data);
        if(res.ok){
          statusEl.className = 'status ok';
          statusEl.textContent = 'Thanks! We’ll be in touch.';
          form.reset();
        }else{
          statusEl.className = 'status err';
          statusEl.textContent = 'Error: ' + (res.error || 'Failed to send');
        }
      }catch(err){
        statusEl.className = 'status err';
        statusEl.textContent = err.message || 'Network error';
      }finally{
        sendBtn.disabled = false;
      }
    });
  </script>
  <noscript>Your browser has JavaScript disabled; the enquiry form needs JS to send.</noscript>
</body>
</html>
